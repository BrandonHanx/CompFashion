executable       = run.sh

universe         = docker
docker_image     = nvidia/cuda:11.1-runtime-ubuntu18.04

log    = condor_log/c$(cluster).p$(process).log
output = condor_log/c$(cluster).p$(process).out
error  = condor_log/c$(cluster).p$(process).error

environment = "mount=/vol/research/xmodal_dl/,/user/HS500/xh00414"

+CanCheckpoint = True
+GPUMem = 11000
+JobRunTime = 12

should_transfer_files = True
stream_output = True

request_GPUs     = 1
request_CPUs     = 1
request_memory = 11G
requirements = (CUDAGlobalMemoryMb > 4500) && \
               (HasDocker) && \
               (CUDACapability > 2.0) && \
               (CUDADeviceName == "GeForce RTX 3090")

queue arguments from (
  --config-file $ENV(PWD)/configs/fashioniq/tirg_bigru_clip.yaml --use-tensorboard
)
